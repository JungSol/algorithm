## ITES

**Difficulty:** Medium

https://algospot.com/judge/problem/read/ITES

수환이는 외계에서 날아오는 전파를 연구하는 범세계 대규모 프로젝트, ITES@home에 참가하고 있습니다. <br/>
외계에서 날아오는 전파는 전처리를 거쳐 각 숫자가 [1,10000] 범위 안에 들어가는 자연수 수열로 주어지는데, 이 전파가 과연 단순한 노이즈인지 아니면 의미 있는 패턴을 가지고 있는 것인지를 파악하고 싶습니다. <br/>
수환이는 전파의 부분 수열 중에 합이 K인 것이 유독 많다는 것을 눈치챘습니다. <br/>
부분 수열이란 연속된 수열의 일부를 말합니다. 예를 들어 수열 {1,4,2,1,4,3,1,6} 에서 합이 7 인 부분 수열은 모두 5개 있습니다. <br/>
{1,4,2} , {4,2,1} , {2,1,4}, {4,3}, {1,6} 이 부분 수열들은 서로 겹쳐도 된다는 데 유의합시다. <br/>

K가 외계인에게 의미 있는 숫자일까요? <br/>
수환이의 가설을 확인하기 위해, 길이 N인 신호 기록이 주어질 때 합이 K인 부분 수열이 몇 개나 있는지 계산하는 프로그램을 작성하세요. <br/>

입력생성 <br/>
입력의 크기가 큰 관계로, 이 문제에서는 신호 기록을 입력받는 대신 다음과 같은 식을 통해 프로그램 내에서 직접 생성합니다. <br/>
* A[0] = 1983
( A[i] = (A[i-1] * 214013 + 2531011) % 232

이 때 i(1 <= i <= N)번째 입력 신호는 A[i-1] % 10000 + 1입니다. 문제의 해법은 입력을 생성하는 방식과는 아무 상관이 없습니다. 이 규칙에 따르면 첫 5개의 신호는 각각 1984, 8791, 4770, 7665, 3188입니다.

입력 <br/>
입력 파일의 첫 줄에는 테스트 케이스의 수 C (1 <= C <= 20)가 주어지고, 그 후 C 줄에 각 2개의 정수로 K(1 <= K <= 5,000,000) 과 N(1 <= N <= 50,000,000) 이 주어집니다.

출력 <br/>
각 테스트 케이스마다 한 줄에 첫 N 개의 신호 중 합이 K 인 구간의 수를 출력합니다.

```
Input:
3
8791 20
5265 5000
3578452 5000000

Output: 
1
4
1049
```

**Note:** <br/>

**Show tag:** \#queue \#offline\_algorithm <br/>

**Related Problem:** two\_pointer.subarray_product_less_than_k <br/>

------------------------------------

**Main** <br/>
시간복잡도 : O(n) 공간복잡도 : O(max(k)) (n=신호의개수, k=신호의합) <br/>
이문제에서 까다로운 부분은 입력의 크기이다. <br/>
5천만개의 32비트 정수를 저장하는데는 50000000\*32byte = 190mb가 필요하기 떄문에 input의 모든 정수를 저장하고 있을 수 없다. <br/>
따라서 모든 input을 메모리에 올려놓지 않고 일부만 메모리에 올려놓는 온라인 알고리즘을 적용해야 한다. <br/>
input은 getSignal 함수로 그때그떄 하나씩 생성하도록 메소드로 만들어 두었다. <br/>
입력 신호의 개수만큼 반복문을 순회하며 하나씩 input signal을 생성하여 현잮지의 합에 더해주고 큐에 넣는다. <br/>
만약 현재까지의 합이 우리가 원하는 k를 넘었다면 k를 넘지 않을 떄까지 큐에서 제거해주고, 현재의 합계에서도 빼준다. <br/>
또한 만약 현재까지의 합이 k랑 같다면 count를 해주면 된다. <br/>

만약 이 문제가 input 크기가 작아서 오프라인 알고리즘을 적용할 수 있었다면, <br/>
굳이 큐를 쓰지 않고 two pointer를 이용해서 구할 수 있었을 것이다. <br/>
하지만 이 문제에서는 input의 크기가 크기때문에 현재 범위 안에 있는 숫자들만 가지고 있을 필요가 있기 때문에 큐를 사용하였다. <br/>